{"version":3,"sources":["webpack:///webpack/bootstrap 8d2df5cca510bcce9219?1a2d","webpack:///./modules/animations/retrosnake/index.js","webpack:///./modules/animations/retrosnake/app.js","webpack:///./modules/animations/retrosnake/background.js","webpack:///./modules/animations/retrosnake/fruit.js","webpack:///./modules/animations/retrosnake/score.js","webpack:///./modules/animations/retrosnake/retrosnake.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH,EAAC,I;;;;;;;;;;;;;;;ACrBD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB,2BAA0B;AAC1B,8FAA6F;AAC7F,wBAAuB;AACvB;AACA;AACA;AACA;AACA;;AAEA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA,0B;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qB;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wB;;;;;;ACxBA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wB;;;;;;ACTA;AACA;AACA;AACA,oBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;AACA;AACA,I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,mBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAqC,OAAO;AAC5C,uCAAsC;AACtC;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA,uBAAsB;AACtB;AACA;AACA,uBAAsB;AACtB;AACA;AACA,uBAAsB;AACtB;AACA;AACA,0FAAyF;AACzF;AACA;AACA,MAAK,2BAA2B;AAChC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,sBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,8B","file":"./bundle/retrosnake.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8d2df5cca510bcce9219","(function() {\r\n  // body...\r\n  var Game = require('./app.js');\r\n\r\n  var _game = new Game({\r\n    el: 'FoodField'\r\n  })\r\n\r\n  _game.run()\r\n\r\n  _game.on('ended', function () {\r\n    console.log('Game Over.')\r\n    document.getElementById(\"over\").style.display = \"block\";\r\n  })\r\n  _game.on('goal', function (data) {\r\n    console.log('score:' + data)\r\n    document.getElementById(\"score\").innerHTML = \"score：\" + data\r\n  })\r\n  _game.on('pause', function (data) {\r\n    console.log('Game Paused.')\r\n  })\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/animations/retrosnake/index.js\n// module id = 0\n// module chunks = 1","var DrawBG = require('./background.js');\r\nvar Fruit = require(\"./fruit.js\");\r\nvar Score = require(\"./score.js\");\r\nvar RetroSnake = require('./retrosnake.js');\r\n\r\nfunction gameObj (opts) {\r\n  var _this = this;\r\n  _this.isPause = false\r\n  _this.speed = opts.speed ? opts.speed : 200; // 值越小，速度越快\r\n  var _foodfield = opts.el ? document.getElementById(opts.el) : '';\r\n  _this.foodfield = _foodfield;\r\n  _this.width = _foodfield.width;\r\n  _this.height = _foodfield.height;\r\n  _this.ctx = _foodfield.getContext('2d');\r\n  _foodfield = '';\r\n  DrawBG(_this.ctx);\r\n\r\n  _this.fruit = new Fruit(_this.ctx);\r\n\r\n  _this.score = new Score({\r\n    step: 100\r\n  });\r\n\r\n  _this.retrosnake = new RetroSnake(_this.ctx);\r\n  _this.retrosnake.init();\r\n  _this.retrosnake.on('dead', function () {\r\n    _this.fireended();\r\n  })\r\n  _this.retrosnake.on('alive', function () {\r\n    window.setTimeout(function () {\r\n      _this.run();\r\n    }, _this.speed);\r\n  })\r\n\r\n  _this.running = '';\r\n\r\n  _this.fire = {\r\n    ended: '',\r\n    goal: '',\r\n    pause: ''\r\n  }\r\n\r\n  document.onkeydown = function (event) {\r\n    var e = event || window.event || arguments.callee.caller.arguments[0];\r\n    if (e && e.keyCode == 38) { //up\r\n      _this.retrosnake.dir != 2 ? _this.retrosnake.dir = 0 : ''\r\n    }\r\n    if (e && e.keyCode == 39) { //right\r\n      _this.retrosnake.dir != 3 ? _this.retrosnake.dir = 1 : '';\r\n    }\r\n    if (e && e.keyCode == 40) { //down\r\n      _this.retrosnake.dir != 0 ? _this.retrosnake.dir = 2 : '';\r\n    }\r\n    if (e && e.keyCode == 37) { //left\r\n      _this.retrosnake.dir != 1 ? _this.retrosnake.dir = 3 : '';\r\n    }\r\n    if (e && e.keyCode == 32) { // space\r\n      _this.isPause = !_this.isPause\r\n      _this.isPause ? (typeof _this.fire.pause == 'function' ? _this.fire.pause() : '') : ''\r\n      _this.run()\r\n    }\r\n  }\r\n}\r\n\r\ngameObj.prototype.run = function () {\r\n  var _this = this;\r\n  !_this.isPause ? _this.frame() : '';\r\n}\r\n\r\ngameObj.prototype.frame = function () {\r\n  var _this = this;\r\n  DrawBG(_this.ctx);\r\n  _this.fruit.init(); // 生成果实\r\n  _this.retrosnake.move(); // 贪吃蛇移动\r\n  if (_this.retrosnake.head.x == _this.fruit.x && _this.retrosnake.head.y == _this.fruit.y) { //snake eats the fruit\r\n    _this.score.goal(); // 得分\r\n    typeof _this.fire.goal == 'function' ? _this.fire.goal(_this.score.score) : ''\r\n    _this.fruit.update();\r\n    _this.retrosnake.grow();\r\n  }\r\n}\r\n\r\ngameObj.prototype.on = function (type, func) { // 监听游戏状态\r\n  var _this = this;\r\n  switch (type) {\r\n    case 'ended': // 结束：\r\n      _this.fire.ended = typeof func == 'function' ? func : '';\r\n      break;\r\n    case 'goal': // 得分：\r\n      _this.fire.goal = typeof func == 'function' ? func : '';\r\n      break;\r\n    case 'pause': // 暂停：\r\n      _this.fire.pause = typeof func == 'function' ? func : '';\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\ngameObj.prototype.fireended = function () {\r\n  var _this = this;\r\n  typeof _this.fire.ended == 'function' ? _this.fire.ended() : '';\r\n}\r\n\r\nfunction hitSelf (retrosnake) {\r\n  var hitself = false;\r\n  for (var i = 0; i < retrosnake.body.length; i++) {\r\n    if (retrosnake.body[i].x == retrosnake.head.x && retrosnake.body[i].y == retrosnake.head.y) {\r\n      hitself = true;\r\n    }\r\n  }\r\n  return hitself;\r\n}\r\n\r\nmodule.exports = gameObj;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/animations/retrosnake/app.js\n// module id = 10\n// module chunks = 1","function bG (ctx) {\r\n  var w = ctx.canvas.width\r\n  var h = ctx.canvas.height\r\n  ctx.save();\r\n  ctx.clearRect(0,0,w,h);\r\n  ctx.fillStyle = 'rgba(0,0,0,1)';\r\n  ctx.fillRect(0,0,w,h);\r\n  ctx.restore();\r\n}\r\nmodule.exports = bG;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/animations/retrosnake/background.js\n// module id = 11\n// module chunks = 1","function fruit (ctx) {\r\n  this.ctx = ctx;\r\n  this.width = ctx.canvas.width;\r\n  this.height = ctx.canvas.height;\r\n  this.x = Math.floor(Math.random() * 49);\r\n  this.y = Math.floor(Math.random() * 49);\r\n}\r\n\r\nfruit.prototype.init = function () {\r\n  var ctx = this.ctx;\r\n  ctx.save();\r\n  ctx.fillStyle = \"#FF7F24\";\r\n  ctx.beginPath();\r\n  ctx.arc(this.x*10+5, this.y*10+5, 4, 0, 2*Math.PI);\r\n  ctx.closePath();\r\n  ctx.fill();\r\n  ctx.restore();\r\n}\r\n\r\nfruit.prototype.update = function () {\r\n  this.x = Math.floor(Math.random() * 49);\r\n  this.y = Math.floor(Math.random() * 49);\r\n}\r\n\r\nmodule.exports = fruit;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/animations/retrosnake/fruit.js\n// module id = 12\n// module chunks = 1","function Score (opts) {\r\n  this.score = 0;\r\n  this.step = opts.step ? opts.step : 50\r\n}\r\n\r\nScore.prototype.goal = function () {\r\n  this.score += this.step\r\n}\r\n\r\nmodule.exports = Score;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/animations/retrosnake/score.js\n// module id = 13\n// module chunks = 1","var _retroSnake = (function () {\r\n  function hitSelf (retrosnake) {\r\n    var hitself = false;\r\n    for (var i = 0; i < retrosnake.body.length; i++) {\r\n      if (retrosnake.body[i].x == retrosnake.head.x && retrosnake.body[i].y == retrosnake.head.y) {\r\n        hitself = true;\r\n      }\r\n    }\r\n    return hitself;\r\n  } \r\n  function retroSnake (ctx) {\r\n    this.ctx = ctx;\r\n    this.width = ctx.canvas.width;\r\n    this.height = ctx.canvas.height;\r\n    this.head = {};\r\n    this.body = [];\r\n    this.dir;\r\n    this.tail;\r\n    this.fire = {\r\n      hitWall: '',\r\n      hitSelf: '',\r\n      dead: '',\r\n      alive: ''\r\n    }\r\n  }\r\n  retroSnake.prototype.init = function () {\r\n    var ctx = this.ctx;\r\n    this.head = {x:24,y:24};\r\n    this.body = [{x:25,y:24}];\r\n    this.dir = 0;\r\n    ctx.save();\r\n    ctx.fillStyle = \"#7CCD7C\";\r\n    ctx.fillRect(this.head.x*10+1,this.head.y*10+1,8,8);\r\n    for (var i = 0; i < this.body.length; i++) {\r\n      var x = this.body[i].x;\r\n      var y = this.body[i].y;\r\n      ctx.fillRect(x*10+2, y*10+2, 6, 6);\r\n    }\r\n    ctx.restore();\r\n  }\r\n\r\n  retroSnake.prototype.move = function (opts) {\r\n    var _this = this\r\n    var ctx = _this.ctx;\r\n    _this.tail = _this.body[_this.body.length - 1];\r\n    for (var i = _this.body.length-1; i > 0; i--) {\r\n      _this.body[i] = _this.body[i-1]; // [0, 1, 2] => [head, 1, 2]\r\n    }\r\n    _this.body[0] = _this.head;\r\n    switch(_this.dir){\r\n      case 0:\r\n        _this.head = { x: _this.head.x, y: _this.head.y - 1 };\r\n        break;\r\n      case 1:\r\n        _this.head = { x: _this.head.x + 1, y: _this.head.y };\r\n        break;\r\n      case 2:\r\n        _this.head = { x: _this.head.x, y: _this.head.y+1 };\r\n        break;\r\n      case 3:\r\n        _this.head = { x: _this.head.x - 1, y: _this.head.y };\r\n        break;\r\n    }\r\n    if (_this.head.x > 49 || _this.head.y > 49 || _this.head.x < 0 || _this.head.y < 0) { // snake hits the wall\r\n      typeof _this.fire.hitWall == 'function' ? _this.fire.hitWall() : ''\r\n      typeof _this.fire.dead == 'function' ? _this.fire.dead() : ''\r\n    } else if (hitSelf(_this)) { // snake hits itself\r\n      typeof _this.fire.hitSelf == 'function' ? _this.fire.hitSelf() : ''\r\n      typeof _this.fire.dead == 'function' ? _this.fire.dead() : ''\r\n    } else {\r\n      ctx.save();\r\n      ctx.fillStyle = \"#7CCD7C\";\r\n      ctx.fillRect(_this.head.x*10+1, _this.head.y*10+1, 8, 8);\r\n      for (var i = 0; i < _this.body.length; i++) {\r\n        var x = _this.body[i].x;\r\n        var y = _this.body[i].y;\r\n        ctx.fillRect(x*10 + 2, y*10 + 2, 6, 6);\r\n      }\r\n      ctx.restore();\r\n      typeof _this.fire.alive == 'function' ? _this.fire.alive() : ''\r\n    }\r\n  }\r\n\r\n  retroSnake.prototype.on = function (type, func) {\r\n    var _this = this\r\n    switch (type) {\r\n      case 'hitwall':\r\n        typeof func == 'function' ? _this.fire.hitWall = func : ''\r\n        break;\r\n      case 'hitself':\r\n        typeof func == 'function' ? _this.fire.hitSelf = func : ''\r\n        break;\r\n      case 'dead':\r\n        typeof func == 'function' ? _this.fire.dead = func : ''\r\n        break;\r\n      case 'alive':\r\n        typeof func == 'function' ? _this.fire.alive = func : ''\r\n        break;\r\n    }\r\n  }\r\n\r\n  retroSnake.prototype.grow = function(){\r\n    var ctx = this.ctx;\r\n    this.body.push(this.tail);\r\n    ctx.save();\r\n    ctx.fillStyle = \"#7CCD7C\";\r\n    ctx.fillRect(this.tail.x+2, this.tail.y+2, 6, 6);\r\n    ctx.restore();\r\n  }\r\n  return retroSnake;\r\n})();\r\n\r\nmodule.exports = _retroSnake;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/animations/retrosnake/retrosnake.js\n// module id = 14\n// module chunks = 1"],"sourceRoot":""}